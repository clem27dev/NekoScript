
const Discord = require('discord.js');

class DiscordNeko {
  constructor() {
    this.client = new Discord.Client();
    this.commands = new Map();
    this.prefix = '!';
  }

  nekConnexion(token) {
    this.client.login(token);
    console.log('ðŸ± Bot connectÃ©!');
    
    this.client.on('ready', () => {
      console.log(`ConnectÃ© en tant que ${this.client.user.tag}`);
    });

    this.client.on('message', (message) => {
      if (!message.content.startsWith(this.prefix)) return;
      
      const args = message.content.slice(this.prefix.length).trim().split(/ +/);
      const command = args.shift().toLowerCase();
      
      if (this.commands.has(command)) {
        const cmd = this.commands.get(command);
        cmd.execute(message, args);
      }
    });
  }

  nekCommande(nom, description, execute) {
    this.commands.set(nom, {
      name: nom,
      description: description,
      execute: execute
    });
  }

  nekReaction(message, emoji) {
    this.client.on('message', msg => {
      if (msg.content.includes(message)) {
        msg.react(emoji);
      }
    });
  }

  nekEnvoiMessage(channel, message) {
    channel.send(message);
  }
}

module.exports = DiscordNeko;
